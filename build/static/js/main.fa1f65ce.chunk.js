(this["webpackJsonpflickr-app"]=this["webpackJsonpflickr-app"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var c,a,r=n(0),s=n.n(r),o=n(18),i=n.n(o),u=(n(78),n(13)),l=n(6),j=(n(47),n(118)),h=n(120),d=n(65),b=Object(r.createContext)(),g=n.p+"static/media/search.e678b073.png",p=n(1),f=function(){var e=Object(r.useContext)(b),t=e.getSearchValue,n=e.searchValue,c=e.onEnterKeyPressed,a=function(e){var t=JSON.parse(localStorage.getItem("searchHistory"));if(t&&t.length>0){if(!t.find((function(t){return t.name===e.name}))){var n=[];t.map((function(e){n.push(e)})),n.push(e),localStorage.setItem("searchHistory",JSON.stringify(n))}}else{var a=[];a.push(e),localStorage.setItem("searchHistory",JSON.stringify(a))}c(!0)};return Object(p.jsxs)("div",{className:"search-component",children:[Object(p.jsx)("div",{className:"search-input-custom-width",children:Object(p.jsx)(d.ReactSearchAutocomplete,{items:JSON.parse(localStorage.getItem("searchHistory"))&&JSON.parse(localStorage.getItem("searchHistory")).length>0?JSON.parse(localStorage.getItem("searchHistory")):[],onSearch:function(e,n){c(!1),t(e)},onSelect:function(e){t(e.name),a(e)},onClear:function(){return window.location.reload()},autoFocus:!0,styling:{borderRadius:"5px"}})}),Object(p.jsx)(h.a,{variant:"light",style:{marginLeft:5},onClick:function(){return a({name:n})},children:Object(p.jsx)("img",{src:g,alt:"",width:"20px"})})]})},O=function(){return Object(p.jsx)(j.a,{bg:"dark",expand:"lg",style:{display:"flex",justifyContent:"center",position:"sticky",left:0,top:0,zIndex:1e3},children:Object(p.jsxs)("div",{children:[Object(p.jsx)(j.a.Brand,{style:{color:"#fff",fontSize:"25px",fontStyle:"bold"},children:"Search Photos"}),Object(p.jsx)(f,{})]})})},x=n(26),m=n.n(x),v=n(40),S=n(41),y=n(114),k=n(115),w=n(116),P=n(119),C=n(117),I=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],a=n[1],s="https://live.staticflickr.com/".concat(e.photo.server,"/").concat(e.photo.id,"_").concat(e.photo.secret,".jpg");return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P.a,{className:"photo-card",onClick:function(){return a(!0)},children:Object(p.jsx)(P.a.Img,{variant:"top",src:s})}),Object(p.jsxs)(C.a,{show:c,onHide:function(){return a(!1)},centered:!0,children:[Object(p.jsx)(C.a.Header,{closeButton:!0,children:Object(p.jsx)(P.a.Title,{children:e.photo.title})}),Object(p.jsx)(C.a.Body,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)(P.a.Img,{variant:"top",src:s})})})]})]})},H=n(70),N=n(29),F=n(50),M=n.n(F),J=Object(N.css)(c||(c=Object(S.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]))),E=function(){var e=Object(r.useContext)(b).loading;return Object(p.jsx)("div",{style:{padding:40},children:Object(p.jsx)(M.a,{color:"#212529",loading:e,css:J,size:10})})},L=(Object(N.css)(a||(a=Object(S.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]))),function(e){var t=Object(r.useContext)(b),n=t.photos,c=t.hasMore,a=t.loading,s=t.remainingItems,o=t.searchValue;return Object(p.jsxs)(y.a,{children:[n.length>0&&Object(p.jsx)(H.a,{dataLength:s,next:function(){return setTimeout(o?e.onSearch:e.getRecentImages,2e3)},hasMore:c,endMessage:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("p",{className:"end-message",children:Object(p.jsx)("b",{children:"You have reached at the end"})})}),children:Object(p.jsx)(k.a,{children:n.length>0&&n.map((function(e){return Object(p.jsx)(w.a,{xs:12,sm:6,md:4,children:Object(p.jsx)(I,{photo:e})})}))})}),a&&Object(p.jsx)(E,{})]})}),V=n(56),R=function(){var e=Object(r.useContext)(b),t=e.currentPage,n=e.getPhotos,c=e.getCurrentPage,a=e.checkHasMore,s=e.getLoadingStatus,o=e.searchValue;Object(r.useEffect)((function(){""===o&&i()}),[]);var i=function(){var e=Object(v.a)(m.a.mark((function e(){var r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),r="https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=4c6819cd6ef85784da413a2b4dbf484c&page=".concat(t,"&format=json&nojsoncallback=1"),e.prev=2,e.next=5,V.get(r);case 5:(o=e.sent).data.photos.photo.map((function(e){n(e)})),s(!1),a(o.data.photos.page),c(o.data.photos.page+1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(L,{getRecentImages:i})},B=n(56),K=function(){var e=Object(r.useContext)(b),t=e.getLoadingStatus,n=e.getPhotos,c=e.getCurrentPage,a=e.currentPage,s=e.checkHasMore,o=e.searchValue,i=e.isEnterKeyPressed,u=e.photos,j=e.loading,h=Object(r.useState)(0),d=Object(l.a)(h,2),g=d[0],f=d[1];Object(r.useEffect)((function(){i&&O()}),[i]);var O=function(){var e=Object(v.a)(m.a.mark((function e(){var r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),r="https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=4c6819cd6ef85784da413a2b4dbf484c&text=".concat(o,"&page=").concat(a,"&format=json&nojsoncallback=1"),e.prev=2,e.next=5,B.get(r);case 5:i=e.sent,f(i.data.photos.total),i.data.photos.photo.map((function(e){n(e)})),t(!1),s(i.data.photos.page),c(i.data.photos.page+1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[u&&u.length>0&&!j&&Object(p.jsxs)("p",{style:{textAlign:"right",margin:10},children:["Found ",g," results"]}),Object(p.jsx)(L,{onSearch:O})]})};var T=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(1),s=Object(l.a)(a,2),o=s[0],i=s[1],j=Object(r.useState)(!1),h=Object(l.a)(j,2),d=h[0],g=h[1],f=Object(r.useState)(null),x=Object(l.a)(f,2),m=x[0],v=x[1],S=Object(r.useState)(!1),y=Object(l.a)(S,2),k=y[0],w=y[1],P=Object(r.useState)(""),C=Object(l.a)(P,2),I=C[0],H=C[1],N=Object(r.useState)(!1),F=Object(l.a)(N,2),M=F[0],J=F[1],E=function(e){g(e)},L=function(e){v(e)};return Object(p.jsx)(b.Provider,{value:{photos:n,currentPage:o,hasMore:d,remainingItems:m,loading:k,searchValue:I,isEnterKeyPressed:M,getPhotos:function(e){c((function(t){return[].concat(Object(u.a)(t),[e])}))},getCurrentPage:function(e){i(e)},getHasMore:E,getRemainingItems:L,getLoadingStatus:function(e){w(e)},getSearchValue:function(e){H(e)},onEnterKeyPressed:function(e){g(!1),v(null),w(!1),c([]),i(1),J(e)},checkHasMore:function(e){var t=1e3-100*e;E(t>0),L(t)}},children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(O,{}),M&&I?Object(p.jsx)(K,{}):Object(p.jsx)(R,{})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root")),z()},47:function(e,t,n){},78:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.fa1f65ce.chunk.js.map